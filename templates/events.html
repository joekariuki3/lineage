{% extends "base.html" %}

{% block content %}
<div class="events container">
    <div class="upcoming">
        <h2 class="mt-4 text-center">{{upcomingEvents | length}} Upcoming</h2>
        {% if upcomingEvents %}
        <div class="accordion col-md-10 " id="accordionEvent">
            {% for event in upcomingEvents%}
            <div class="card mt-4">
                <div class="card-header d-flex align-items-center justify-content-between"
                    id="heading{{event.event_id}}">
                    <div class="d-flex justify-content-between">
                        <h5 class="mb-0">
                            {{event.event_name}}
                            <span class="text-success">
                                On {{event.event_date}}
                            </span>
                        </h5>
                    </div>
                    <button class="btn btn-link" type="button" data-toggle="collapse"
                        data-target="#collapse{{event.event_id}}" aria-expanded="true"
                        aria-controls="#collapse{{event.event_id}}">
                        More...
                    </button>
                    </h5>
                </div>

                <div id="collapse{{event.event_id}}" class="collapse" aria-labelledby="heading{{event.event_id}}"
                    data-parent="#accordionEvent">
                    <div class="card-body">
                        <h5 class="card-title">Venue: {{event.location}}</h5>
                        <p class="card-text">{{event.description}}</p>
                        <p class="small text-muted">{{event.event_date}}</p>
                        {% if current_user.is_authenticated%}
                        <a href="{{url_for('edit_event', event_id=event.event_id)}}" class="btn btn-outline-primary">
                            <svg fill="#000000" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <style type="text/css">
                                        .st0 {
                                            fill: none;
                                        }
                                    </style>
                                    <path
                                        d="M5,2v2H4C2.9,4,2,4.9,2,6v11c0,1.1,0.9,2,2,2h6.8c1.8-1.8,0,0,2-2H4V8h12v5.9c1.6-1.6,0.2-0.2,2-2V6c0-1.1-0.9-2-2-2h-1V2 h-2v2H7V2H5z M10,9.2l-0.8,2L7,11.4l1.6,1.4l-0.5,2.1l1.8-1.1l1.8,1.1l-0.5-2.1l1.6-1.4l-2.2-0.2L10,9.2z M20.5,12 c-0.1,0-0.3,0.1-0.4,0.2L19.3,13l2,2l0.8-0.8c0.2-0.2,0.2-0.6,0-0.7l-1.3-1.3C20.8,12,20.6,12,20.5,12z M18.8,13.5L12.3,20v2h2 l6.5-6.5L18.8,13.5">
                                    </path>
                                    <rect class="st0" width="24" height="24"></rect>
                                </g>
                            </svg>
                            Edit
                        </a>
                        <a href="#" class="btn btn-outline-danger" data-toggle="modal"
                            data-target="#deleteModal{{event.event_id}}">
                            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path fill="#000000"
                                        d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z">
                                    </path>
                                </g>
                            </svg>
                            Delete
                        </a>
                        {% endif%}
                    </div>
                    <!-- modal start -->
                    <div class="modal fade" id="deleteModal{{event.event_id}}" tabindex="-1" role="dialog"
                        aria-labelledby="deleteModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="deleteModalLabel">Delete {{event.event_name}} Event</h5>
                                    <button type="button" class="btn-close" data-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <p>Are you sure you want to DELETE {{event.event_name}} Event ?</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">No Close</button>
                                    <a href="{{url_for('delete_event', event_id=event.event_id)}}"
                                        class="btn btn-danger">Yes
                                        Delete</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal end -->
                </div>
            </div>
            {% endfor%}
        </div>
        {% else %}
        <p class="text-center">No Upcoming Events currently</p>
        {% endif%}
    </div>
    <div class="past">
        <h2 class="mt-4 text-center">{{pastEvents | length}} Past</h2>
        <!-- collapse -->
        {% if pastEvents %}
        <div class="accordion col-md-10" id="accordionPastEvent">
            {% for event in pastEvents%}
            <div class="card mt-4">
                <div class="card-header d-flex align-items-center justify-content-between"
                    id="heading{{event.event_id}}">
                    <div class="d-flex justify-content-between">
                        <h5 class="mb-0">
                            {{event.event_name}}
                            <span class="text-success">
                                On {{event.event_date}}
                            </span>
                        </h5>
                    </div>
                    <button class="btn btn-link" type="button" data-toggle="collapse"
                        data-target="#collapse{{event.event_id}}" aria-expanded="false"
                        aria-controls="collapse{{event.event_id}}">
                        More...
                    </button>
                    </h5>
                </div>

                <div id="collapse{{event.event_id}}" class="collapse" aria-labelledby="heading{{event.event_id}}"
                    data-parent="#accordionPastEvent">
                    <div class="card-body">
                        <h5 class="card-title">Venue: {{event.location}}</h5>
                        <p class="card-text">{{event.description}}</p>
                        <p class="small text-muted">{{event.event_date}}</p>
                        {% if current_user.is_authenticated%}
                        <a href="{{url_for('edit_event', event_id=event.event_id)}}" class="btn btn-outline-primary">
                            <svg fill="#000000" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <style type="text/css">
                                        .st0 {
                                            fill: none;
                                        }
                                    </style>
                                    <path
                                        d="M5,2v2H4C2.9,4,2,4.9,2,6v11c0,1.1,0.9,2,2,2h6.8c1.8-1.8,0,0,2-2H4V8h12v5.9c1.6-1.6,0.2-0.2,2-2V6c0-1.1-0.9-2-2-2h-1V2 h-2v2H7V2H5z M10,9.2l-0.8,2L7,11.4l1.6,1.4l-0.5,2.1l1.8-1.1l1.8,1.1l-0.5-2.1l1.6-1.4l-2.2-0.2L10,9.2z M20.5,12 c-0.1,0-0.3,0.1-0.4,0.2L19.3,13l2,2l0.8-0.8c0.2-0.2,0.2-0.6,0-0.7l-1.3-1.3C20.8,12,20.6,12,20.5,12z M18.8,13.5L12.3,20v2h2 l6.5-6.5L18.8,13.5">
                                    </path>
                                    <rect class="st0" width="24" height="24"></rect>
                                </g>
                            </svg>
                            Edit
                        </a>
                        <a href="#" class="btn btn-outline-danger" data-toggle="modal"
                            data-target="#deleteModal{{event.event_id}}">
                            <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path fill="#000000"
                                        d="M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z">
                                    </path>
                                </g>
                            </svg>
                            Delete
                        </a>
                        {% endif %}
                    </div>
                    <!-- modal start -->
                    <div class="modal fade" id="deleteModal{{event.event_id}}" tabindex="-1" role="dialog"
                        aria-labelledby="deleteModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="deleteModalLabel">Delete {{event.event_name}} Event</h5>
                                    <button type="button" class="btn-close" data-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <p>Are you sure you want to DELETE {{event.event_name}} Event ?</p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">No Close</button>
                                    <a href="{{url_for('delete_event', event_id=event.event_id)}}"
                                        class="btn btn-danger">Yes
                                        Delete</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal end -->
                </div>
            </div>
            {% endfor%}
        </div>
        {% else %}
        <p class="text-center">No Past Events currently</p>
        {% endif%}
        <!-- collapse end -->
    </div>
</div>
{% endblock %}