<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script defer src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700&family=Oswald:wght@200;300;400;500;600;700&family=Playfair+Display&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:wght@300;400&display=swap"
        rel="stylesheet">

    <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
    {% if title %}
    <title>{{ title }} - Lineage</title>
    {% else %}
    <title>Lineage</title>
    {% endif %}
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-info">
        <div class="container-fluid container">
            <button class="navbar-toggler" type="button" id="show-big" data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasExample" aria-controls="offcanvasExample" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="{{ url_for('index') }}">Lineage</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample"
                aria-controls="offcanvasExample" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- button for small screen -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                </ul>
                <ul class="navbar-nav  mb-2 mb-lg-0">
                    {% if current_user.is_anonymous %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('login') }}">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('register') }}">Register</a>
                    </li>
                    {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('user_profile')}}">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                <g id="SVGRepo_iconCarrier">
                                    <path
                                        d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"
                                        stroke="#000000" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                    </path>
                                    <path d="M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z"
                                        stroke="#000000" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round"></path>
                                </g>
                            </svg>
                            {{current_user.name}}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <main>
        <!-- sidebar start -->
        <div class="d-flex flex-column  p-3 bg-light offcanvas offcanvas-start" style="width: 280px;" tabindex="-1"
            id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
            <div class="sidebar-top">
                <a href="{{ url_for('index') }}"
                    class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
                    <span class="fs-4">Lineage</span>
                </a>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <hr>
            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item">
                    <a href="{{ url_for('index') }}" class="nav-link link-dark" aria-current="page">
                        <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 495.398 495.398"
                            xml:space="preserve">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <g>
                                    <g>
                                        <g>
                                            <path
                                                d="M487.083,225.514l-75.08-75.08V63.704c0-15.682-12.708-28.391-28.413-28.391c-15.669,0-28.377,12.709-28.377,28.391 v29.941L299.31,37.74c-27.639-27.624-75.694-27.575-103.27,0.05L8.312,225.514c-11.082,11.104-11.082,29.071,0,40.158 c11.087,11.101,29.089,11.101,40.172,0l187.71-187.729c6.115-6.083,16.893-6.083,22.976-0.018l187.742,187.747 c5.567,5.551,12.825,8.312,20.081,8.312c7.271,0,14.541-2.764,20.091-8.312C498.17,254.586,498.17,236.619,487.083,225.514z">
                                            </path>
                                            <path
                                                d="M257.561,131.836c-5.454-5.451-14.285-5.451-19.723,0L72.712,296.913c-2.607,2.606-4.085,6.164-4.085,9.877v120.401 c0,28.253,22.908,51.16,51.16,51.16h81.754v-126.61h92.299v126.61h81.755c28.251,0,51.159-22.907,51.159-51.159V306.79 c0-3.713-1.465-7.271-4.085-9.877L257.561,131.836z">
                                            </path>
                                        </g>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        Home
                    </a>
                </li>
                {% if not current_user.is_anonymous %}
                <li class="nav-item">
                    <a href="{{ url_for('create_family') }}" class="nav-link link-dark">
                        <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 502.102 502.102"
                            xml:space="preserve">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <g>
                                    <g>
                                        <path
                                            d="M141.595,107.303c28.857,0,52.24-23.384,52.24-52.24c0-28.856-23.382-52.239-52.24-52.239 c-28.856,0-52.239,23.383-52.239,52.239C89.356,83.919,112.738,107.303,141.595,107.303z">
                                        </path>
                                    </g>
                                    <g>
                                        <path
                                            d="M204.183,368.306c-8.702-1.257-16.593-5.754-22.167-12.766c-6.631-8.343-9.054-19.081-6.65-29.461l0.313-1.352 c-9.971,1.276-19.644-1.027-27.669-6.064c-9.479-5.947-16.073-15.228-18.57-26.136c-2.497-10.906-0.596-22.132,5.351-31.61 l77.115-122.904c-7.746-11.097-19.743-16.869-32.09-16.869h-76.439c-15.485,0-29.033,9.091-35.66,22.516L2.736,275.3 c-6.46,13.09-1.087,28.939,12.002,35.4c13.092,6.462,28.94,1.086,35.401-12.001l21.271-43.093l6.861,90.35v126.891 c0,14.598,11.834,26.431,26.432,26.431s26.432-11.833,26.432-26.431V353.209h20.928v119.638c0,14.598,11.834,26.431,26.432,26.431 c12.939,0,23.698-9.3,25.979-21.578c-0.185-1.594-0.29-3.211-0.29-4.853V368.306z">
                                        </path>
                                    </g>
                                    <g>
                                        <path
                                            d="M327.207,398.848c-6.558-1.582-12.436-5.3-16.741-10.719c-5.163-6.495-7.436-14.636-6.438-22.753 c-0.087,0-0.176,0.001-0.262,0.001c-3.52,0-6.995-0.522-10.333-1.518v108.989c0,14.598,11.834,26.431,26.433,26.431 c4.354,0,8.458-1.06,12.08-2.925c-3.009-5.284-4.738-11.387-4.738-17.89V398.848z">
                                        </path>
                                    </g>
                                    <g>
                                        <path
                                            d="M273.061,309.822l65.045-103.666c3.467-5.524,8.297-9.908,13.907-12.844c-9.213-9.895-14.865-23.149-14.865-37.703 c0-4.46,0.545-8.794,1.545-12.952l-3.242-5.165c-4.822-7.684-12.947-12.031-21.376-12.363c-2.589-0.355-59.817-0.332-62.22,0.001 c-8.427,0.331-16.554,4.678-21.375,12.362l-82.597,131.64c-7.759,12.366-4.025,28.679,8.34,36.438 c12.369,7.761,28.68,4.02,36.437-8.341l8.326-13.268l-10.563,45.607c-1.327,5.729,0.033,11.751,3.692,16.355 c3.66,4.604,9.22,7.287,15.102,7.287h10.422v119.638c0,14.598,11.834,26.431,26.433,26.431c14.598,0,26.431-11.833,26.431-26.431 V353.209h4.19C266.257,341.468,264.3,323.784,273.061,309.822z">
                                        </path>
                                    </g>
                                    <g>
                                        <path
                                            d="M498.916,318.037L433.865,214.37c-3.797-6.05-10.196-9.475-16.833-9.735c-1.002-0.138-12.364-0.203-23.898-0.203 c-11.975,0-24.133,0.07-25.099,0.204c-6.638,0.26-13.039,3.685-16.835,9.736l-65.046,103.667 c-6.109,9.737-3.168,22.585,6.569,28.694c9.743,6.114,22.589,3.163,28.694-6.569l6.556-10.448l-8.318,35.915 c-1.044,4.512,0.027,9.254,2.909,12.88c2.881,3.626,7.261,5.739,11.893,5.739h8.207v94.215c0,11.496,9.319,20.815,20.815,20.815 c11.495,0,20.813-9.319,20.813-20.815v-94.215h16.482v94.215c0,11.496,9.321,20.815,20.815,20.815 c11.496,0,20.813-9.319,20.813-20.815v-94.215h8.206c4.631,0,9.01-2.113,11.891-5.739c2.882-3.626,3.953-8.367,2.908-12.88 l-8.316-35.921l6.561,10.456c6.112,9.742,18.964,12.676,28.693,6.567C502.085,340.622,505.026,327.774,498.916,318.037z">
                                        </path>
                                    </g>
                                    <g>
                                        <path
                                            d="M282.968,113.577c27.943,0,50.703-22.65,50.703-50.704c0-28.007-22.694-50.704-50.703-50.704 s-50.703,22.696-50.703,50.704C232.265,90.932,255.031,113.577,282.968,113.577z">
                                        </path>
                                    </g>
                                    <g>
                                        <path
                                            d="M370.783,189.088c6.259,4.074,13.726,6.45,21.753,6.45c8.029,0,15.496-2.377,21.755-6.453 c10.936-7.122,18.173-19.449,18.173-33.477c0-22.056-17.873-39.929-39.928-39.929c-22.057,0-39.93,17.874-39.93,39.929 C352.606,169.638,359.843,181.967,370.783,189.088z">
                                        </path>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        Add Family
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('add_event') }}" class="nav-link link-dark">
                        <svg fill="#000000" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 612.00 612.00" xml:space="preserve">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <g>
                                    <g>
                                        <path
                                            d="M499.641,320.573c-12.207-3.251-25.021-5.011-38.25-5.011c-1.602,0-3.189,0.071-4.781,0.119 c-78.843,2.506-142.118,66.556-143.375,145.709c-0.015,0.799-0.062,1.587-0.062,2.391c0,15.85,2.515,31.102,7.119,45.422 C339.474,568.835,395.381,612,461.391,612c81.859,0,148.219-66.359,148.219-148.219 C609.609,395.151,562.954,337.441,499.641,320.573z M461.391,561.797c-54.133,0-98.016-43.883-98.016-98.016 s43.883-98.016,98.016-98.016s98.016,43.883,98.016,98.016S515.523,561.797,461.391,561.797z">
                                        </path>
                                        <polygon
                                            points="475.734,396.844 442.266,396.844 442.266,449.438 389.672,449.438 389.672,482.906 442.266,482.906 442.266,535.5 475.734,535.5 475.734,482.906 528.328,482.906 528.328,449.438 475.734,449.438 ">
                                        </polygon>
                                        <path
                                            d="M126.703,112.359c9.228,0,16.734-7.507,16.734-16.734V54.984v-38.25C143.438,7.507,135.931,0,126.703,0h-14.344 c-9.228,0-16.734,7.507-16.734,16.734v38.25v40.641c0,9.228,7.506,16.734,16.734,16.734H126.703z">
                                        </path>
                                        <path
                                            d="M389.672,112.359c9.228,0,16.734-7.507,16.734-16.734V54.984v-38.25C406.406,7.507,398.899,0,389.672,0h-14.344 c-9.228,0-16.734,7.507-16.734,16.734v38.25v40.641c0,9.228,7.507,16.734,16.734,16.734H389.672z">
                                        </path>
                                        <path
                                            d="M274.922,494.859c-2.333-11.6-3.572-23.586-3.572-35.859c0-4.021,0.177-7.999,0.435-11.953H74.109 c-15.845,0-28.688-12.843-28.688-28.688v-229.5h411.188v88.707c3.165-0.163,6.354-0.253,9.562-0.253 c11.437,0,22.61,1.109,33.469,3.141V93.234c0-21.124-17.126-38.25-38.25-38.25h-31.078v40.641c0,22.41-18.23,40.641-40.641,40.641 h-14.344c-22.41,0-40.641-18.231-40.641-40.641V54.984H167.344v40.641c0,22.41-18.231,40.641-40.641,40.641h-14.344 c-22.41,0-40.641-18.231-40.641-40.641V54.984H40.641c-21.124,0-38.25,17.126-38.25,38.25v363.375 c0,21.124,17.126,38.25,38.25,38.25H274.922z">
                                        </path>
                                        <circle cx="137.165" cy="260.578" r="37.954"></circle>
                                        <circle cx="251.016" cy="260.578" r="37.954"></circle>
                                        <circle cx="364.867" cy="260.578" r="37.954"></circle>
                                        <circle cx="251.016" cy="375.328" r="37.953"></circle>
                                        <circle cx="137.165" cy="375.328" r="37.953"></circle>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        Add Event
                    </a>
                </li>
                {% if current_user.families | length > 1 %}
                <div class="dropdown nav-item">
                    <li class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
                        style="padding-left:0.7rem ;" id="dropdownMenuButton" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        <svg fill="#000000" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <style type="text/css">
                                    .st0 {
                                        fill: none;
                                    }
                                </style>
                                <path
                                    d="M6,2v2H5C3.9,4,3,4.9,3,6v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2h-1V2h-2v2H8V2H6z M5,9h14v11H5V9z">
                                </path>
                                <path
                                    d="M15.9,18.3l-2.4-1.5L11,18.3l0.6-2.7l-2.1-1.8l2.8-0.2l1.1-2.6l1.1,2.6l2.8,0.3l-2.1,1.8L15.9,18.3z">
                                </path>
                                <rect class="st0" width="24" height="24"></rect>
                            </g>
                        </svg>
                        View Events
                    </li>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        {% for family in current_user.families%}
                        <a class="dropdown-item nav-item"
                            href="{{url_for('get_events', family_id =family.family_id)}}">{{family.name}}</a>
                        {% endfor%}
                    </div>
                </div>
                {% else %}
                <li class="nav-item">
                    <a href="{{url_for('get_events', family_id =current_user.families[0].family_id)}}"
                        class="nav-link link-dark">
                        <svg fill="#000000" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <style type="text/css">
                                    .st0 {
                                        fill: none;
                                    }
                                </style>
                                <path
                                    d="M6,2v2H5C3.9,4,3,4.9,3,6v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V6c0-1.1-0.9-2-2-2h-1V2h-2v2H8V2H6z M5,9h14v11H5V9z">
                                </path>
                                <path
                                    d="M15.9,18.3l-2.4-1.5L11,18.3l0.6-2.7l-2.1-1.8l2.8-0.2l1.1-2.6l1.1,2.6l2.8,0.3l-2.1,1.8L15.9,18.3z">
                                </path>
                                <rect class="st0" width="24" height="24"></rect>
                            </g>
                        </svg>
                        View Events
                    </a>
                </li>
                {% endif%}
                {% endif %}
            </ul>
            <hr>
            <ul class="nav nav-pills flex-column">
                {% if current_user.is_anonymous %}
                <li class="nav-item">
                    <a href="{{ url_for('login') }}" class="nav-link link-dark">
                        <svg class="bi me-2" width="16" height="16">
                            <use xlink:href="#grid" />
                        </svg>
                        Login
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('register') }}" class="nav-link link-dark">
                        <svg class="bi me-2" width="16" height="16">
                            <use xlink:href="#people-circle" />
                        </svg>
                        Register
                    </a>
                </li>
                {% else%}
                <div class="dropdown">
                    <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
                        id="dropdownUser2" data-bs-toggle="dropdown" aria-expanded="false">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                            <g id="SVGRepo_iconCarrier">
                                <path
                                    d="M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z"
                                    stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                </path>
                                <path d="M12 14C8.13401 14 5 17.134 5 21H19C19 17.134 15.866 14 12 14Z" stroke="#000000"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </g>
                        </svg>
                        <strong>{{
                            current_user.name}}</strong>
                    </a>
                    <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser2">
                        <li><a class="dropdown-item nav-item" href="{{ url_for('user_profile')}}">Profile</a>
                        </li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item nav-item" href="{{ url_for('logout') }}">Logout</a></li>
                    </ul>
                </div>
                {% endif %}
            </ul>
        </div>
        <!-- sidebar end -->
        <div class="container">
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{category}} alert-dismissible mt-4 col-md-6 m-auto" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            {% block content %} {% endblock %}
        </div>
    </main>
</body>

</html>